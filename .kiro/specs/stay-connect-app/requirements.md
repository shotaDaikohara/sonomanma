# 要件書

## はじめに

StayConnectは、趣味や興味関心に基づいて宿主とゲストをマッチングする宿泊マッチングアプリです。従来の宿泊サービスとは異なり、共通の趣味を持つ人同士が出会い、新しい体験を共有できるプラットフォームを提供します。

## 要件

### 要件1：ユーザー登録・認証機能

**ユーザーストーリー:** ユーザーとして、アカウントを作成してアプリにログインしたい。安全で信頼できる認証システムを通じて個人情報を保護したい。

#### 受け入れ基準

1. WHEN ユーザーが新規登録フォームに必要情報を入力 THEN システムは新しいアカウントを作成する
2. WHEN ユーザーがメールアドレスとパスワードでログイン THEN システムは認証を行いダッシュボードにリダイレクトする
3. WHEN ユーザーが無効な認証情報を入力 THEN システムは適切なエラーメッセージを表示する
4. WHEN ユーザーがログアウト THEN システムはセッションを終了しログイン画面にリダイレクトする

### 要件2：プロフィール管理機能

**ユーザーストーリー:** ユーザーとして、自分のプロフィール情報と興味関心を設定・編集したい。他のユーザーとのマッチング精度を向上させるため。

#### 受け入れ基準

1. WHEN ユーザーがプロフィール編集画面にアクセス THEN システムは現在の情報を表示する
2. WHEN ユーザーが興味関心を複数選択 THEN システムは選択された項目を保存する
3. WHEN ユーザーがプロフィール情報を更新 THEN システムは変更を保存し確認メッセージを表示する
4. WHEN ユーザーが必須項目を空白にして保存 THEN システムは適切な検証エラーを表示する

### 要件3：宿主検索・マッチング機能

**ユーザーストーリー:** ゲストとして、自分の興味関心に合った宿主を検索し、マッチング率を確認したい。最適な宿泊先を見つけるため。

#### 受け入れ基準

1. WHEN ユーザーが検索画面にアクセス THEN システムはマッチング率順に宿主一覧を表示する
2. WHEN システムがマッチング率を計算 THEN 共通の興味関心、立地、評価を考慮した率を表示する
3. WHEN ユーザーが宿主カードをタップ THEN システムは詳細情報を表示する
4. WHEN 宿主に宿泊可能日程がある THEN システムは利用可能な日程を表示する

### 要件4：宿主詳細表示機能

**ユーザーストーリー:** ゲストとして、宿主の詳細情報、写真、レビュー、宿泊可能日程を確認したい。宿泊の判断材料とするため。

#### 受け入れ基準

1. WHEN ユーザーが宿主詳細を表示 THEN システムはプロフィール、評価、興味関心、マッチング理由を表示する
2. WHEN 宿主に複数の宿泊可能日程がある THEN システムはカレンダー形式で日程を表示する
3. WHEN ユーザーが写真ギャラリーを表示 THEN システムは宿泊場所の写真を表示する
4. WHEN ユーザーがレビューセクションを表示 THEN システムは過去のゲストからの評価とコメントを表示する

### 要件5：予約・メッセージ機能

**ユーザーストーリー:** ゲストとして、気に入った宿主に宿泊予約を申し込み、事前にメッセージでやり取りしたい。安心して宿泊するため。

#### 受け入れ基準

1. WHEN ユーザーが予約申し込みボタンをタップ THEN システムは予約フォームを表示する
2. WHEN ユーザーが宿泊日程と人数を選択して申し込み THEN システムは宿主に通知を送信する
3. WHEN ユーザーがメッセージを送信 THEN システムは相手に通知し会話履歴を保存する
4. WHEN 宿主が予約を承認または拒否 THEN システムはゲストに結果を通知する

### 要件6：マイページ機能

**ユーザーストーリー:** ユーザーとして、自分のプロフィール、宿泊履歴、お気に入り、設定を一元管理したい。アプリを効率的に利用するため。

#### 受け入れ基準

1. WHEN ユーザーがマイページにアクセス THEN システムはプロフィール概要と評価を表示する
2. WHEN ユーザーが宿泊履歴をタップ THEN システムは過去の宿泊記録と評価を表示する
3. WHEN ユーザーがお気に入りをタップ THEN システムは保存した宿主一覧を表示する
4. WHEN ユーザーが設定をタップ THEN システムは通知設定やプライバシー設定を表示する

### 要件7：レスポンシブデザイン

**ユーザーストーリー:** ユーザーとして、スマートフォンでも快適にアプリを利用したい。外出先でも宿泊先を検索・予約するため。

#### 受け入れ基準

1. WHEN ユーザーがモバイルデバイスでアクセス THEN システムはモバイル最適化されたUIを表示する
2. WHEN ユーザーがタッチ操作を行う THEN システムは適切なタッチターゲットサイズで応答する
3. WHEN 画面サイズが変更される THEN システムは自動的にレイアウトを調整する
4. WHEN ユーザーがスワイプやタップ操作を行う THEN システムは直感的に反応する